[test]
Description: Cache Hit on not reparable infected file | Expected: Error

# Previous request was for *same* document, but was found
# infected. So proxy should not have cache it and returned 302
# Asking again same doc and make sure it's *not* a cache hit
# Should go all the way down to the OS

### request

[client-request]
request: {
	GET http://$(SVR_HOST):$(SVR_PORT)/file2.exe http/1.0
	Host: http://$(SVR_HOST):$(SVR_PORT)/
	User-Agent: HTTP Protocol Tester Client 1.0
	Content-Length: 0
}

### response

[server-response]
http-response: {
	HTTP/1.1 200 OK
	Date: +0
	Server: HTTP Protocol Tester 1.0
	Content-Type: application/binary 
}
content-file: ./Tests/VirusScan/virus_not_reparable.txt

### verification
[output]
#print-headers: true 
#print-body: true 

[proxy-request]
verify-header-valid: true

[server-response]
Must-have: {
	Status == 200
	Version == HTTP/1.1
}
verify-header-valid: true

[proxy-response]
Must-have: {
	Status == 302 
	Server: HTTP Protocol Tester 1.0
	Content-Type: text/html 
}
verify-header-valid: true


